# User Encryption<a name="EN-US_TOPIC_0046912051"></a>

User encryption allows you to use the encryption feature provided on the public cloud platform to encrypt ECS resources, improving data security. User encryption includes image encryption and EVS disk encryption.

## Image Encryption<a name="section1150469610136"></a>

Image encryption supports encrypting private images. When creating an ECS, if you select an encrypted image, the system disk of the created ECS is automatically encrypted, improving data security.

Use either of the following methods to create an encrypted image:

-   Use an existing encrypted ECS.
-   Use an external image file.

For more information about image encryption, see  _Image Management Service User Guide_.

## EVS Disk Encryption<a name="section2746706105950"></a>

EVS disk encryption supports system disk encryption and data disk encryption.

-   When creating an ECS, you can encrypt added data disks.
-   When creating an ECS, if you select an encrypted image, the system disk of the created ECS automatically has encryption enabled, and the encryption mode complies with the image encryption mode.

For more information about EVS disk encryption, see  _Elastic Volume Service User Guide_.

## Impact on AS<a name="section4202207210118"></a>

If you use an encrypted ECS to create an Auto Scaling \(AS\) configuration, the encryption mode of the created AS configuration complies with the ECS encryption mode.

## About Keys<a name="section19557327144021"></a>

The key used for encryption relies on the Key Management Service \(KMS\). KMS uses a data encryption key \(DEK\) to encrypt data and a customer master key \(CMK\) to encrypt the DEK.

**Figure  1**  Data encryption process<a name="fig66853906172350"></a>  
![](figures/data-encryption-process.png "data-encryption-process")

[Table 1](#table58453122162120)  describes the keys involved in the data encryption process.

**Table  1**  Keys

<a name="table58453122162120"></a>
<table><thead align="left"><tr id="row6497527162120"><th class="cellrowborder" valign="top" width="19.05%" id="mcps1.2.4.1.1"><p id="p39076761162120"><a name="p39076761162120"></a><a name="p39076761162120"></a>Name</p>
</th>
<th class="cellrowborder" valign="top" width="51.190000000000005%" id="mcps1.2.4.1.2"><p id="p11101063162120"><a name="p11101063162120"></a><a name="p11101063162120"></a>Description</p>
</th>
<th class="cellrowborder" valign="top" width="29.759999999999998%" id="mcps1.2.4.1.3"><p id="p26770914162120"><a name="p26770914162120"></a><a name="p26770914162120"></a>Function</p>
</th>
</tr>
</thead>
<tbody><tr id="row58635137174217"><td class="cellrowborder" valign="top" width="19.05%" headers="mcps1.2.4.1.1 "><p id="p57954190174217"><a name="p57954190174217"></a><a name="p57954190174217"></a>DEK</p>
</td>
<td class="cellrowborder" valign="top" width="51.190000000000005%" headers="mcps1.2.4.1.2 "><p id="p63777803174217"><a name="p63777803174217"></a><a name="p63777803174217"></a>An encryption key that is used for encrypting data.</p>
</td>
<td class="cellrowborder" valign="top" width="29.759999999999998%" headers="mcps1.2.4.1.3 "><p id="p65728400174217"><a name="p65728400174217"></a><a name="p65728400174217"></a>Encrypts specific data.</p>
</td>
</tr>
<tr id="row58688680162120"><td class="cellrowborder" valign="top" width="19.05%" headers="mcps1.2.4.1.1 "><p id="p56162650162120"><a name="p56162650162120"></a><a name="p56162650162120"></a>CMK</p>
</td>
<td class="cellrowborder" valign="top" width="51.190000000000005%" headers="mcps1.2.4.1.2 "><p id="p43507848163034"><a name="p43507848163034"></a><a name="p43507848163034"></a>An encryption key created using KMS for encrypting DEKs.</p>
<p id="p52880825162120"><a name="p52880825162120"></a><a name="p52880825162120"></a>A CMK can encrypt multiple DEKs.</p>
</td>
<td class="cellrowborder" valign="top" width="29.759999999999998%" headers="mcps1.2.4.1.3 "><p id="p55488428162120"><a name="p55488428162120"></a><a name="p55488428162120"></a>Supports CMK disabling and scheduled deletion.</p>
</td>
</tr>
<tr id="row16784881174432"><td class="cellrowborder" valign="top" width="19.05%" headers="mcps1.2.4.1.1 "><p id="p15745174440"><a name="p15745174440"></a><a name="p15745174440"></a>Default CMK</p>
</td>
<td class="cellrowborder" valign="top" width="51.190000000000005%" headers="mcps1.2.4.1.2 "><p id="p5894849611303"><a name="p5894849611303"></a><a name="p5894849611303"></a>A master key automatically generated by the system when you use KMS for encryption for the first time.</p>
<p id="p545438611310"><a name="p545438611310"></a><a name="p545438611310"></a>The name extension of a default CMK is <strong id="b842352706112532"><a name="b842352706112532"></a><a name="b842352706112532"></a>/default</strong>, for example, <strong id="b842352706235235"><a name="b842352706235235"></a><a name="b842352706235235"></a>evs/default</strong>.</p>
</td>
<td class="cellrowborder" valign="top" width="29.759999999999998%" headers="mcps1.2.4.1.3 "><a name="ul1649396175041"></a><a name="ul1649396175041"></a><ul id="ul1649396175041"><li>Supports viewing details of the default CMK on the KMS console.</li><li>Does not support CMK disabling or scheduled deletion.</li></ul>
</td>
</tr>
</tbody>
</table>

>![](/images/icon-note.gif) **NOTE:**   
>After disabling a CMK or scheduling the deletion of a CMK takes effect, the EVS disk encrypted using this CMK can still be used until the disk is detached from and then attached to an ECS again. During this process, the disk fails to be attached to the ECS because the CMK cannot be obtained. Therefore, the EVS disk becomes unavailable.  

For details about KMS, see  _Key Management Service User Guide_.

